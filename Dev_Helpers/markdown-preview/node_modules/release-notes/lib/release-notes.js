(function() {
  var ReleaseNoteStatusBar, ReleaseNotesView, createReleaseNotesView, deserializer, releaseNotesUri;

  ReleaseNotesView = null;

  ReleaseNoteStatusBar = require('./release-notes-status-bar');

  releaseNotesUri = 'atom://release-notes';

  createReleaseNotesView = function(uri, version, releaseNotes) {
    if (ReleaseNotesView == null) {
      ReleaseNotesView = require('./release-notes-view');
    }
    return new ReleaseNotesView(uri, version, releaseNotes);
  };

  deserializer = {
    name: 'ReleaseNotesView',
    deserialize: function(_arg) {
      var releaseNotes, uri, version;
      uri = _arg.uri, version = _arg.version, releaseNotes = _arg.releaseNotes;
      return createReleaseNotesView(uri, version, releaseNotes);
    }
  };

  atom.deserializers.add(deserializer);

  module.exports = {
    activate: function() {
      var createStatusEntry, previousVersion;
      previousVersion = atom.config.get('release-notes.viewedVersion');
      atom.config.set('release-notes.viewedVersion', atom.getVersion());
      atom.workspaceView.on('window:update-available', (function(_this) {
        return function(event, version, releaseNotes) {
          localStorage["release-notes:version"] = version;
          return localStorage["release-notes:releaseNotes"] = releaseNotes;
        };
      })(this));
      atom.project.registerOpener(function(filePath) {
        var releaseNotes, version;
        if (filePath !== releaseNotesUri) {
          return;
        }
        version = localStorage["release-notes:version"];
        releaseNotes = localStorage["release-notes:releaseNotes"];
        return createReleaseNotesView(filePath, version, releaseNotes);
      });
      atom.workspaceView.command('release-notes:show', function() {
        return atom.workspaceView.open('atom://release-notes');
      });
      createStatusEntry = function() {
        return new ReleaseNoteStatusBar(previousVersion);
      };
      if (atom.workspaceView.statusBar) {
        return createStatusEntry();
      } else {
        return atom.packages.once('activated', function() {
          return createStatusEntry();
        });
      }
    }
  };

}).call(this);

//# sourceMappingURL=/../../../../../../../../..//tmp/atom-build/Atom.app/Contents/Resources/app/node_modules/release-notes/lib/release-notes.js.map
