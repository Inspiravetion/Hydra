(function() {
  var KeybindingsPanel, path;

  path = require('path');

  KeybindingsPanel = require('../lib/keybindings-panel');

  describe("KeybindingsPanel", function() {
    var panel;
    panel = null;
    beforeEach(function() {
      expect(atom.keymap).toBeDefined();
      spyOn(atom.keymap, 'getKeyBindings').andReturn([
        {
          source: "" + (atom.getLoadSettings().resourcePath) + path.sep + "keymaps",
          keystroke: 'ctrl-a',
          command: 'core:select-all',
          selector: '.editor'
        }
      ]);
      return panel = new KeybindingsPanel;
    });
    it("loads and displays core key bindings", function() {
      var row;
      expect(panel.keybindingRows.children().length).toBe(1);
      row = panel.keybindingRows.find(':first');
      expect(row.find('.keystroke').text()).toBe('ctrl-a');
      expect(row.find('.command').text()).toBe('core:select-all');
      expect(row.find('.source').text()).toBe('Core');
      return expect(row.find('.selector').text()).toBe('.editor');
    });
    return describe("when a keybinding is copied", function() {
      describe("when the keybinding file ends in .cson", function() {
        return it("writes a CSON snippet to the clipboard", function() {
          spyOn(atom.keymap, 'getUserKeymapPath').andReturn('keymap.cson');
          panel.find('.copy-icon').click();
          return expect(atom.clipboard.read()).toBe("'.editor':\n  'ctrl-a': 'core:select-all'");
        });
      });
      return describe("when the keybinding file ends in .json", function() {
        return it("writes a JSON snippet to the clipboard", function() {
          spyOn(atom.keymap, 'getUserKeymapPath').andReturn('keymap.json');
          panel.find('.copy-icon').click();
          return expect(atom.clipboard.read()).toBe("\".editor\": {\n  \"ctrl-a\": \"core:select-all\"\n}");
        });
      });
    });
  });

}).call(this);

//# sourceMappingURL=/../../../../../../../../..//tmp/atom-build/Atom.app/Contents/Resources/app/node_modules/settings-view/spec/keybindings-panel-spec.js.map
